# .env.prod.example
# Copy to .env.prod and fill in all values before deploying.
# NEVER commit .env.prod to version control.
#
# Usage:
#   docker compose -f docker-compose.prod.yml --env-file .env.prod build
#   docker compose -f docker-compose.prod.yml --env-file .env.prod up -d

# ─────────────────────────────────────
# DOMAIN & TLS (Let's Encrypt)
# ─────────────────────────────────────
DOMAIN=oncocollab.example.com
ACME_EMAIL=admin@example.com

# ─────────────────────────────────────
# TRAEFIK DASHBOARD (optional)
# ─────────────────────────────────────
# BasicAuth for traefik.DOMAIN dashboard
# Generate with: echo $(htpasswd -nB admin) | sed -e s/\\$/\\$\\$/g
TRAEFIK_DASHBOARD_AUTH=admin:$$2y$$05$$replace_with_real_hash

# ─────────────────────────────────────
# DATABASE
# ─────────────────────────────────────
POSTGRES_DB=oncocollab
POSTGRES_USER=oncocollab_prod
POSTGRES_PASSWORD=change_this_to_a_strong_password

# ─────────────────────────────────────
# REDIS
# ─────────────────────────────────────
REDIS_PASSWORD=change_this_to_a_strong_redis_password

# ─────────────────────────────────────
# EXTERNAL SERVICES
# ─────────────────────────────────────
GEMINI_API_KEY=your_gemini_api_key_here
ORGANIZATION_NAME=OncoCollab

# ─────────────────────────────────────
# WEBRTC / COTURN
# ─────────────────────────────────────
# Public IP of the server (find with: curl -s ifconfig.me)
EXTERNAL_IP=1.2.3.4

VITE_STUN_URL=stun:stun.l.google.com:19302
VITE_TURN_URL=turn:1.2.3.4:3478
VITE_TURN_USERNAME=oncocollab_turn_user
VITE_TURN_PASSWORD=change_this_to_a_strong_turn_password

# ─────────────────────────────────────
# PREREQUISITES
# ─────────────────────────────────────
# 1. DNS A records must exist BEFORE first deploy:
#    app.DOMAIN    -> SERVER_IP
#    api.DOMAIN    -> SERVER_IP
#    ws.DOMAIN     -> SERVER_IP
#    reports.DOMAIN -> SERVER_IP
#    traefik.DOMAIN -> SERVER_IP  (optional, for dashboard)
#
# 2. Firewall: open ports 80/tcp, 443/tcp, 3478/tcp+udp, 50000-50020/udp
#
# 3. Ensure entrypoint scripts are executable:
#    chmod +x rest-api/docker-entrypoint.sh websocket/docker-entrypoint.sh
